<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title th:text="'Tasks for ' + ${client.name}"></title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet" />
</head>
<body class="bg-gray-100 p-8">

<h2 class="text-2xl font-bold mb-4" th:text="'Tasks for ' + ${client.name}"></h2>

<div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4">
    <div th:each="task : ${tasks}" class="bg-white p-4 rounded shadow">
        <h3 class="font-semibold text-lg" th:text="${task.title}"></h3>
        <p th:text="${task.description}"></p>
        <p class="text-sm text-gray-500" th:text="${task.status}"></p>
        <p class="text-sm text-gray-400" th:text="'Due: ' + ${#dates.format(task.dueDate, 'yyyy-MM-dd')}"></p>

        <!-- Buttons -->
        <div class="mt-2 space-x-4">
            <a th:href="@{/admin/client/{clientId}/task/{taskId}/edit(clientId=${client.id}, taskId=${task.id})}"
               class="text-blue-600 hover:underline">Edit</a>

            <!-- Delete form -->
            <form th:action="@{/admin/client/{clientId}/task/{taskId}/delete(clientId=${client.id}, taskId=${task.id})}"
                  method="post" class="inline">
                <input type="hidden" name="_method" value="delete"/>
                <button type="submit" class="text-red-600 hover:underline"
                        onclick="return confirm('Are you sure you want to delete this task?');">
                    Delete
                </button>
            </form>
        </div>
    </div>


</div>

<!-- Add Task Button -->
<a th:href="@{/admin/client/{id}/task/add(id=${client.id})}"
   class="mt-6 inline-block bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700">
    Add Task
</a>

<!-- Logout -->
<form th:action="@{/logout}" method="post" class="mt-6">
    <button type="submit" class="bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600">
        Logout
    </button>
</form>

</body>
</html>
